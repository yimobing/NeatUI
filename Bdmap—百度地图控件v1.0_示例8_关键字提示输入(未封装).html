<!DOCTYPE html>
<html lang="zh-cmn-Hans">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
        <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="application-name" content="网站名称">
        <meta name="applicable-device" content="pc,mobile">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Cache-Control" content="no-transform">
        <meta http-equiv="Cache-Control" content="no-siteapp">
        <title> 关键字输入提示词条</title>
        <meta name="keywords" content="">
        <meta name="description" content="">
    </head>
    <body>
        <style>
            body,
            html {
                width: 100%;
                height: 100%;
                margin: 0;
                font-family: "微软雅黑";
                font-size: 14px;
            }
            #l-map {
                height: 300px;
                width: 100%;
            }
            #r-result {
                width: 100%;
            }
        </style>

        <div id="l-map"></div>
        <div id="r-result">
            请输入:
            <input
                type="text"
                id="suggestId"
                size="20"
                value="百度"
                style="width: 150px"
            />
        </div>
        <div
            id="searchResultPanel"
            style="
                border: 1px solid #c0c0c0;
                width: 150px;
                height: auto;
                display: none;
            "
        ></div>

        <!-- ================================================================================-->
        <!--                             JAVASCRIPT                                          -->
        <!-- ================================================================================-->
        <script src="http://api.map.baidu.com/api?v=2.0&ak=KmYpNYDatEVqdNvwvDXsbbOvQhTvPg9X"></script> <!--百度地图api文件-->
        <script>
            var map = new BMap.Map("l-map");
            map.centerAndZoom("泉州", 12); // 初始化地图,设置城市和地图级别。


            //——————————————————————————————————————————
            // 百度地图API功能
            function G(id) {
                return document.getElementById(id);
            }
            var ac = new BMap.Autocomplete({ // 建立一个自动完成的对象
                input: "suggestId",
                location: map,
            });
            ac.addEventListener("onhighlight", function (e) {
                // 鼠标放在下拉列表上的事件
                var str = "";
                var _value = e.fromitem.value;
                var value = "";
                if (e.fromitem.index > -1) {
                    value =
                        _value.province +
                        _value.city +
                        _value.district +
                        _value.street +
                        _value.business;
                }
                str =
                    "FromItem<br />index = " +
                    e.fromitem.index +
                    "<br />value = " +
                    value;

                value = "";
                if (e.toitem.index > -1) {
                    _value = e.toitem.value;
                    value =
                        _value.province +
                        _value.city +
                        _value.district +
                        _value.street +
                        _value.business;
                }
                str +=
                    "<br />ToItem<br />index = " +
                    e.toitem.index +
                    "<br />value = " +
                    value;
                G("searchResultPanel").innerHTML = str;
            });

            var myValue;
            ac.addEventListener("onconfirm", function (e) {
                // 鼠标点击下拉列表后的事件
                var _value = e.item.value;
                myValue =
                    _value.province +
                    _value.city +
                    _value.district +
                    _value.street +
                    _value.business;
                G("searchResultPanel").innerHTML =
                    "onconfirm<br />index = " +
                    e.item.index +
                    "<br />myValue = " +
                    myValue;

                setPlace();
            });

            function setPlace() {
                map.clearOverlays(); // 清除地图上所有覆盖物
                function myFun() {
                    var pp = local.getResults().getPoi(0).point; // 获取第一个智能搜索的结果
                    console.log('pp：', pp);
                    map.centerAndZoom(pp, 18);
                    map.addOverlay(new BMap.Marker(pp)); // 添加标注
                }
                var local = new BMap.LocalSearch(map, {
                    // 智能搜索
                    onSearchComplete: myFun,
                });
                local.search(myValue);
            }

            
        </script>
    </body>
</html>
